!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([,function(e,t,r){"use strict";THREE.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,r=/^usemtl /;function i(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var i=this.vertices,n=this.object.geometry.vertices;n.push(i[e+0],i[e+1],i[e+2]),n.push(i[t+0],i[t+1],i[t+2]),n.push(i[r+0],i[r+1],i[r+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var i=this.normals,n=this.object.geometry.normals;n.push(i[e+0],i[e+1],i[e+2]),n.push(i[t+0],i[t+1],i[t+2]),n.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,t,r){var i=this.uvs,n=this.object.geometry.uvs;n.push(i[e+0],i[e+1]),n.push(i[t+0],i[t+1]),n.push(i[r+0],i[r+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,i,n,a,s,o,l){var u=this.vertices.length,h=this.parseVertexIndex(e,u),c=this.parseVertexIndex(t,u),f=this.parseVertexIndex(r,u);if(this.addVertex(h,c,f),void 0!==i){var p=this.uvs.length;h=this.parseUVIndex(i,p),c=this.parseUVIndex(n,p),f=this.parseUVIndex(a,p),this.addUV(h,c,f)}if(void 0!==s){var m=this.normals.length;h=this.parseNormalIndex(s,m),c=s===o?h:this.parseNormalIndex(o,m),f=s===l?h:this.parseNormalIndex(l,m),this.addNormal(h,c,f)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,i=this.uvs.length,n=0,a=e.length;n<a;n++)this.addVertexLine(this.parseVertexIndex(e[n],r));var s=0;for(a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],i))}};return e.startObject("",!1),e}function n(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}return n.prototype={constructor:n,load:function(e,t,r,i){var n=this,a=new THREE.FileLoader(n.manager);a.setPath(this.path),a.load(e,function(e){t(n.parse(e))},r,i)},setPath:function(e){this.path=e},setMaterials:function(e){return this.materials=e,this},parse:function(n){console.time("OBJLoader");var a=new i;-1!==n.indexOf("\r\n")&&(n=n.replace(/\r\n/g,"\n")),-1!==n.indexOf("\\\n")&&(n=n.replace(/\\\n/g,""));for(var s=n.split("\n"),o="",l="",u=[],h="function"==typeof"".trimLeft,c=0,f=s.length;c<f;c++)if(o=s[c],0!==(o=h?o.trimLeft():o.trim()).length&&"#"!==(l=o.charAt(0)))if("v"===l){var p=o.split(/\s+/);switch(p[0]){case"v":a.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vn":a.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":a.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===l){for(var m=o.substr(1).trim().split(/\s+/),d=[],v=0,g=m.length;v<g;v++){var b=m[v];if(b.length>0){var j=b.split("/");d.push(j)}}var E=d[0];for(v=1,g=d.length-1;v<g;v++){var y=d[v],x=d[v+1];a.addFace(E[0],y[0],x[0],E[1],y[1],x[1],E[2],y[2],x[2])}}else if("l"===l){var L=o.substring(1).trim().split(" "),w=[],M=[];if(-1===o.indexOf("/"))w=L;else for(var V=0,T=L.length;V<T;V++){var I=L[V].split("/");""!==I[0]&&w.push(I[0]),""!==I[1]&&M.push(I[1])}a.addLineGeometry(w,M)}else if(null!==(u=e.exec(o))){var H=(" "+u[0].substr(1).trim()).substr(1);a.startObject(H)}else if(r.test(o))a.object.startMaterial(o.substring(7).trim(),a.materialLibraries);else if(t.test(o))a.materialLibraries.push(o.substring(7).trim());else{if("s"!==l){if("\0"===o)continue;throw new Error("Unexpected line: '"+o+"'")}if((u=o.split(" ")).length>1){var O=u[1].trim().toLowerCase();a.object.smooth="0"!==O&&"off"!==O}else a.object.smooth=!0;(G=a.object.currentMaterial())&&(G.smooth=a.object.smooth)}a.finalize();var R=new THREE.Group;R.materialLibraries=[].concat(a.materialLibraries);for(c=0,f=a.objects.length;c<f;c++){var F=a.objects[c],A=F.geometry,S=F.materials,_="Line"===A.type;if(0!==A.vertices.length){var B=new THREE.BufferGeometry;B.addAttribute("position",new THREE.BufferAttribute(new Float32Array(A.vertices),3)),A.normals.length>0?B.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(A.normals),3)):B.computeVertexNormals(),A.uvs.length>0&&B.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(A.uvs),2));for(var U,z=[],P=0,C=S.length;P<C;P++){var N=S[P],G=void 0;if(null!==this.materials&&(G=this.materials.create(N.name),_&&G&&!(G instanceof THREE.LineBasicMaterial))){var D=new THREE.LineBasicMaterial;D.copy(G),G=D}G||((G=_?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial).name=N.name),G.flatShading=!N.smooth,z.push(G)}if(z.length>1){for(P=0,C=S.length;P<C;P++){N=S[P];B.addGroup(N.groupStart,N.groupCount,P)}U=_?new THREE.LineSegments(B,z):new THREE.Mesh(B,z)}else U=_?new THREE.LineSegments(B,z[0]):new THREE.Mesh(B,z[0]);U.name=F.name,R.add(U)}}return console.timeEnd("OBJLoader"),R}},n}()}]);
//# sourceMappingURL=objloader.js.map